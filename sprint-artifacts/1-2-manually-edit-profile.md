# Story 1.2: Manually Edit Profile - EPIC-1-STORY-1.2

Status: drafted

## Story

As a job seeker,
I want to manually edit my parsed CV information,
So that I can correct any parsing errors or add missing details.

## Acceptance Criteria

1.  **Given** My CV has been parsed
2.  **When** I navigate to the profile editing interface
3.  **Then** I can see and modify extracted fields (e.g., job titles, dates, descriptions, skills).
4.  **And** The changes are saved to my profile.

## Tasks / Subtasks

**Backend:**
*   Implement API endpoint: `GET /cv_documents/{cv_id}` to retrieve CV data. (AC: 3)
*   Implement API endpoint: `PUT /cv_documents/{cv_id}` to update CV data. (AC: 4)
*   Implement CRUD operations for updating `CvDocument` in `crud/crud_cv_document.py`. (AC: 4)
*   Update `schemas/cv_document.py` for API requests/responses for editing.
*   Implement validation logic for updated fields.

**Frontend:**
*   Develop React UI for a profile editing interface. (AC: 2, 3)
*   Display extracted CV fields in an editable format. (AC: 3)
*   Implement functionality to send updated data to the backend via `PUT /cv_documents/{cv_id}`. (AC: 4)
*   Provide clear feedback on save success/failure.

## Dev Notes

### Relevant Architecture Patterns and Constraints:
*   **Data Architecture (CV Document):** Utilize `CV Document` entity in PostgreSQL. Structured `parsed_sections_json` field is key for this story.
*   **Backend Framework:** FastAPI.
*   **API Contract:** `GET /cv_documents/{cv_id}`, `PUT /cv_documents/{cv_id}`.
*   **Error Handling:** Standardized API Error Responses (FastAPI HTTPException).
*   **Frontend Framework:** React.

### Source Tree Components to Touch:
*   `backend/app/api/endpoints/documents.py`: Add new endpoints for GET and PUT.
*   `backend/app/crud/crud_cv_document.py`: Add update functions.
*   `backend/app/schemas/cv_document.py`: Update or add schemas for editing.
*   `frontend/src/pages/ProfileEditPage.jsx` (or similar): New page/component for editing.
*   `frontend/src/api/cv.js` (or similar): Implement frontend API service for updating.

### Testing Standards Summary:
*   **Backend:** Unit tests for CRUD update operations. Integration tests for `GET /cv_documents/{cv_id}` and `PUT /cv_documents/{cv_id}` API endpoints.
*   **Frontend:** Component tests for the profile editing UI.

### Project Structure Notes:
*   Adhere to defined `backend/app/` subdirectories (`api/endpoints/`, `crud/`, `schemas/`).
*   Adhere to defined `frontend/src/` subdirectories (`pages/`, `components/`, `api/`).
*   Follow naming conventions: `snake_case` for API endpoints and Python, `PascalCase` for React components, `camelCase` for JS variables.

### Prerequisites:
*   Story 1.1: Upload CV (Text-only) completed with structured data extraction implemented.

---
_Generated by SM Agent - create-story workflow_
_Date: 2025-12-08_
